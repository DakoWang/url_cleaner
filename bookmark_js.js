javascript: (function() { function getQueryString(name) { var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); var r = window.location.search.substr(1).match(reg); if (r != null) return r[2]; return null; } var site = window.location.href.match(/^http(s)?:\/\/[\w\.\/]*/); var id = getQueryString("id"); var q = getQueryString("q"); if (id != null) { var pureUrl = site[0] + "?id=" + id; } else if (q != null) { var pureUrl = site[0] + "?q=" + q; } else if (site[0].substr(site[0].length - 13) == "view_shop.htm") { var pureUrl = window.location.protocol + "//" + window.location.host; } else { var pureUrl = site[0]; } var reload = prompt("净化后的网址是：", pureUrl); if (reload != null) { window.location.href = pureUrl; } })();
